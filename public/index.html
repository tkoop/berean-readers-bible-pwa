<html>

<head>
	<meta name="encoding" content="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Berean Reader's Bible</title>
	<link rel="stylesheet" href="style.css" />
	<link rel="icon" type="image/png" href="logo_32.png" />
</head>

<body>
	<div id="header">
		<svg id="menuIcon" onclick="showIndex()"
			xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="24" height="24"
			viewBox="0 0 24 24">
			<path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" />
		</svg>

		<h2 onclick="showIndex()" style="cursor:pointer">Berean Reader's Bible</h2>
	</div>
	<div id="body">
		<div id="index"></div>
		<div id="chapter"></div>
	</div>
</body>

<script src="books.js"></script>

<script>
	function showIndex() {
		document.getElementById("index").style.display = "block"
		document.getElementById("chapter").style.display = "none"
		document.getElementById("menuIcon").style.display = "none"
	}

	function loadChapter(element) {
		document.getElementById("index").style.display = "none"
		var url = element.href
		fetch(element.href).then(function (response) {
			return response.text()
		}).then(function (text) {
			var chapter = document.getElementById("chapter")
			chapter.innerHTML = text
			chapter.style.display = "block"
			document.getElementById("menuIcon").style.display = "block"
		})
	}

	books.forEach(function (book) {
		var bookDiv = document.createElement("div");
		bookDiv.innerHTML = "<div class='index-book'>" + book.name + "</div>";
		var chapterLinks = "<div class='index-chapters'>"
		for (let i = 1; i <= book.chapters; i++) {
			chapterLinks += "<a href='chapters/" + book.slug + "-" + i + ".html' onclick='loadChapter(this); return false'>" + i + "</a> ";
		}
		chapterLinks += "</div>"
		bookDiv.innerHTML += chapterLinks;
		document.getElementById("index").appendChild(bookDiv);
	});

</script>

</html>
